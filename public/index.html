<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PULSTAR - Modern Anonim Ä°letiÅŸim Platformu</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body class="dark-theme">
    <header class="main-header">
        <div class="header-container">
            <div class="logo">
                <h1 class="brand-logo">PULSTAR</h1>
                <span class="tagline">Modern Anonymous Communication</span>
            </div>
            <div class="header-controls">
                <div class="theme-switcher">
                    <button id="themeToggle" class="theme-btn">
                        <svg class="theme-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main class="main-content">
        <section class="hero-section">
            <div class="hero-container">
                <div class="hero-content">
                    <h1 class="hero-title">PULSTAR</h1>
                    <p class="hero-tagline">Anonim Sohbet Platformu</p>
                    <p class="hero-description">Genel sohbet odasÄ±nda binlerce kullanÄ±cÄ±yla tanÄ±ÅŸÄ±n veya arkadaÅŸlarÄ±nÄ±zla Ã¶zel odalar oluÅŸturun. Tamamen anonim, gÃ¼venli ve eÄŸlenceli sohbet deneyimi.</p>
                    <div class="hero-buttons">
                        <a href="/join" class="primary-btn">Sohbete KatÄ±l</a>
                        <a href="/create" class="secondary-btn">Ã–zel Oda OluÅŸtur</a>
                    </div>
                    <p class="security-note">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                <path d="M12 22S8 18 8 13V6L12 4L16 6V13C16 18 12 22 12 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            End-to-end ÅŸifreleme ile korunmuÅŸ
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ODA LÄ°STESÄ° BAÅžLANGIÃ‡ -->
        <section class="roomlist-section" id="roomlist">
            <div class="section-container">
                <h2 class="section-title">Aktif Odalar</h2>
                <div class="roomlist-filters">
                    <label>Kategori:
                        <select id="filterCategory">
                            <option value="">TÃ¼mÃ¼</option>
                            <option value="genel">Genel</option>
                            <option value="oyun">Oyun</option>
                            <option value="mÃ¼zik">MÃ¼zik</option>
                            <option value="eÄŸitim">EÄŸitim</option>
                            <option value="sohbet">Sohbet</option>
                            <option value="yardÄ±m">YardÄ±m</option>
                            <option value="diÄŸer">DiÄŸer</option>
                        </select>
                    </label>
                    <label>Durum:
                        <select id="filterStatus">
                            <option value="">TÃ¼mÃ¼</option>
                            <option value="aÃ§Ä±k">AÃ§Ä±k</option>
                            <option value="dolu">Dolu</option>
                            <option value="ÅŸifreli">Åžifreli</option>
                        </select>
                    </label>
                    <button id="refreshRoomsBtn">Yenile</button>
                </div>
                <div class="roomlist-table-container">
                    <table class="roomlist-table">
                        <thead>
                            <tr>
                                <th>Oda AdÄ±</th>
                                <th>Kategori</th>
                                <th>KatÄ±lÄ±mcÄ±</th>
                                <th>Durum</th>
                                <th>Åžifre</th>
                                <th>AÃ§Ä±klama</th>
                                <th>Son Aktivite</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="roomListBody">
                            <tr><td colspan="8">YÃ¼kleniyor...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
        <!-- ODA LÄ°STESÄ° BÄ°TÄ°Åž -->

        <section class="features-section" id="features">
            <div class="section-container">
                <h2 class="section-title">Platform Ã–zellikleri</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
                                <path d="M12 22S8 18 8 13V6L12 4L16 6V13C16 18 12 22 12 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <h3>Tam GÃ¼venlik</h3>
                        <p>End-to-end ÅŸifreleme ile tÃ¼m konuÅŸmalarÄ±nÄ±z tamamen gÃ¼vende. HiÃ§bir Ã¼Ã§Ã¼ncÃ¼ taraf mesajlarÄ±nÄ±zÄ± okuyamaz.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
                                <path d="M20 21V19C20 16.7909 18.2091 15 16 15H8C5.79086 15 4 16.7909 4 19V21M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <h3>Tam Anonimlik</h3>
                        <p>HiÃ§bir kiÅŸisel bilgi gerektirmez. KayÄ±t olmadan, kimlik paylaÅŸmadan anlÄ±k baÄŸlantÄ± kurun.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
                                <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <h3>GÃ¼venli Ortam</h3>
                        <p>GeliÅŸmiÅŸ kÃ¼fÃ¼r filtreleme ve moderasyon sistemi ile temiz ve gÃ¼venli sohbet ortamÄ±.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
                                <path d="M17 21V19C17 16.7909 15.2091 15 13 15H5C2.79086 15 1 16.7909 1 19V21M23 21V19C23 16.7909 21.2091 15 19 15H17M13 7C13 9.20914 10.7614 11 8 11C5.23858 11 3 9.20914 3 7C3 4.79086 5.23858 3 8 3C10.7614 3 13 4.79086 13 7ZM19 7C19 8.65685 17.6569 10 16 10C14.3431 10 13 8.65685 13 7C13 5.34315 14.3431 4 16 4C17.6569 4 19 5.34315 19 7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <h3>Grup Sohbeti</h3>
                        <p>Genel odada yÃ¼zlerce kiÅŸiyle sohbet edin veya arkadaÅŸlarÄ±nÄ±zla Ã¶zel odalar oluÅŸturun.</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="feedback-section">
            <div class="feedback-container">
                <h2 class="feedback-title">Anonim Ä°stek & Ã–neri</h2>
                <p class="feedback-subtitle">Platformumuzu geliÅŸtirmek iÃ§in anonim gÃ¶rÃ¼ÅŸ ve Ã¶nerilerinizi paylaÅŸÄ±n</p>
                <div class="feedback-form">
                    <textarea id="feedbackText" class="feedback-textarea" placeholder="Ä°steÄŸinizi veya Ã¶nerinizi buraya yazÄ±n..." rows="5"></textarea>
                    <button id="submitFeedback" class="feedback-submit">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                            <path d="M22 2L11 13M22 2L15 22L11 13M22 2L2 9L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        GÃ¶nder
                    </button>
                    <p class="feedback-note">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M12 22S8 18 8 13V6L12 4L16 6V13C16 18 12 22 12 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Tamamen anonim - HiÃ§bir kiÅŸisel bilgi saklanmaz
                    </p>
                </div>
            </div>
        </section>

    </main>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        // Tema deÄŸiÅŸtirme
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        
        themeToggle.addEventListener('click', () => {
            body.classList.toggle('dark-theme');
            body.classList.toggle('light-theme');
            
            // Tema durumunu kaydet
            const isDark = body.classList.contains('dark-theme');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            
            // Ä°kon gÃ¼ncelle
            updateThemeIcon(isDark);
        });
        
        function updateThemeIcon(isDark) {
            const icon = themeToggle.querySelector('.theme-icon path');
            if (isDark) {
                icon.setAttribute('d', 'M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z');
            } else {
                icon.setAttribute('d', 'M12 1V3M12 21V23M4.22 4.22L5.64 5.64M18.36 18.36L19.78 19.78M1 12H3M21 12H23M4.22 19.78L5.64 18.36M18.36 5.64L19.78 4.22M12 8A4 4 0 1 0 12 16A4 4 0 0 0 12 8Z');
            }
        }
        
        // Sayfa yÃ¼klendiginde tema durumunu kontrol et
        const savedTheme = localStorage.getItem('theme') || 'dark';
        if (savedTheme === 'light') {
            body.classList.remove('dark-theme');
            body.classList.add('light-theme');
            updateThemeIcon(false);
        } else {
            updateThemeIcon(true);
        }

        // Chat baÅŸlatma butonu
        document.getElementById('startChatBtn').addEventListener('click', () => {
            window.location.href = '/chat';
        });
        
        // Feedback gÃ¶nderme
        document.getElementById('submitFeedback').addEventListener('click', () => {
            const feedback = document.getElementById('feedbackText').value.trim();
            if (feedback) {
                // Burada feedback'i sunucuya gÃ¶nderebilirsiniz
                alert('Ä°steÄŸiniz baÅŸarÄ±yla gÃ¶nderildi! TeÅŸekkÃ¼rler.');
                document.getElementById('feedbackText').value = '';
            } else {
                alert('LÃ¼tfen bir mesaj yazÄ±n.');
            }
        });
        
        // Enter tuÅŸuyla gÃ¶nderme
        document.getElementById('feedbackText').addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && e.ctrlKey) {
                document.getElementById('submitFeedback').click();
            }
        });
    // --- ODA LÄ°STESÄ° JS ---
    const socket = io();
    const roomListBody = document.getElementById('roomListBody');
    const filterCategory = document.getElementById('filterCategory');
    const filterStatus = document.getElementById('filterStatus');
    const refreshRoomsBtn = document.getElementById('refreshRoomsBtn');

    function fetchRooms() {
        socket.emit('get-rooms');
    }
    function formatDate(dateStr) {
        const d = new Date(dateStr);
        return d.toLocaleString('tr-TR', {hour:'2-digit',minute:'2-digit',day:'2-digit',month:'2-digit'});
    }
    function renderRooms(rooms) {
        let filtered = rooms;
        if (filterCategory.value) filtered = filtered.filter(r => r.category === filterCategory.value);
        if (filterStatus.value) {
            if(filterStatus.value==="ÅŸifreli") filtered = filtered.filter(r=>r.passwordProtected);
            else filtered = filtered.filter(r=>r.status===filterStatus.value);
        }
        if (!filtered.length) {
            roomListBody.innerHTML = '<tr><td colspan="8">Oda bulunamadÄ±.</td></tr>';
            return;
        }
        roomListBody.innerHTML = filtered.map(room => `
            <tr>
                <td>${room.name}</td>
                <td>${room.category}</td>
                <td>${room.userCount} / ${room.maxUsers}</td>
                <td>${room.status.charAt(0).toUpperCase()+room.status.slice(1)}</td>
                <td>${room.passwordProtected ? '<span title="Åžifreli">ðŸ”’</span>' : ''}</td>
                <td>${room.description || '-'}</td>
                <td>${formatDate(room.lastActivity || room.createdAt)}</td>
                <td><button onclick="window.location.href='/join?code=${room.id}'">KatÄ±l</button></td>
            </tr>
        `).join('');
    }
    socket.on('room-list', renderRooms);
    filterCategory.addEventListener('change', fetchRooms);
    filterStatus.addEventListener('change', fetchRooms);
    refreshRoomsBtn.addEventListener('click', fetchRooms);
    // Ä°lk yÃ¼klemede odalarÄ± getir
    fetchRooms();
    // 10sn'de bir otomatik gÃ¼ncelle
    setInterval(fetchRooms, 10000);
    // --- ODA LÄ°STESÄ° JS SONU ---
    </script>
</body>
</html>
